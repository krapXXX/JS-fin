let products = [
    {
        name: 'Scaters Barbie',
        originalImage: 'pics/shop/doll.avif',
        hoveredImage: 'pics/shop/doll_1.avif',
        starImages: [
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '3500.00',
        currentPrice: '2599.99',
        productCharacteristics: [
            'Includes roller skates with functional wheels for smooth rolling action.',
            'Comes with a sporty outfit featuring a bright top and comfortable shorts.',
            'Includes a set of detachable knee pads, elbow pads, and a matching helmet for safety.',
            'Made from durable, lightweight plastic designed for active play.',
            'Part of the Adventure Series collection, encouraging outdoor play and imagination.',
            'Movable arms and legs allow dynamic posing for realistic skating adventures.',
            'Perfect gift for children aged 5 and up who love energetic activities.',
        ],
    },
    {
        name: 'Mermaid Barbie',
        originalImage: 'pics/shop/doll2.avif',
        hoveredImage: 'pics/shop/doll2_2.avif',
        starImages: [
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '2000.00',
        currentPrice: '1599.99',
        productCharacteristics: [
            'Features a colorful, glittery tail with a rainbow gradient design.',
            'Hair is long, soft, and easy to comb, perfect for styling and accessorizing.',
            'Includes a shell-shaped hairbrush and a tiara for undersea adventures.',
            'Tail fins are articulated to mimic swimming motions in water play.',
            'Made with waterproof materials, perfect for bath time or pool play.',
            'Part of the Magical Creatures collection, inspiring imaginative storytelling.',
            'Eyes are detailed with sparkling accents to match her aquatic theme.',
        ],
    },
    {
        name: 'Disabled Barbie',
        originalImage: 'pics/shop/doll3.avif',
        hoveredImage: 'pics/shop/doll3_3.avif',
        starImages: [
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_b.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '1500.00',
        currentPrice: '599.99',
        productCharacteristics: [
            'Comes with a stylish wheelchair with rolling wheels and adjustable footrests.',
            'Includes a detachable ramp compatible with Barbie Dreamhouses and playsets.',
            'Outfit features bright, casual clothing that’s easy to change.',
            'Movable joints make it easy to pose Barbie in and out of her wheelchair.',
            'Wheelchair is made of sturdy, lightweight plastic for long-lasting play.',
            'Part of the Empowerment Collection, celebrating diversity and inclusion.',
            'Perfect for teaching kids empathy and understanding through play.',
        ],
    },
    {
        name: 'Latino Barbie',
        originalImage: 'pics/shop/doll4.avif',
        hoveredImage: 'pics/shop/doll4_4.avif',
        starImages: [
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '2000.00',
        currentPrice: '1599.99',
        productCharacteristics: [
            'Wears a vibrant, hand-painted traditional dress inspired by Latino culture.',
            'Accessories include a matching hairpiece and a pair of elegant earrings.',
            'Hair is long, thick, and perfect for creative styling and braiding.',
            'Part of the Cultural Heritage collection, promoting cultural appreciation.',
            'Outfit is made of high-quality fabric with intricate embroidery details.',
            'Movable arms and legs make it easy to pose for dancing or celebrating.',
            'A great teaching tool for introducing kids to global cultures through play.',
        ],
    },
    {
        name: 'Collection Barbie',
        originalImage: 'pics/shop/doll5.jpg',
        hoveredImage: 'pics/shop/doll5_5.jpg',
        starImages: [
            'pics/shop/star_y.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '4500.00',
        currentPrice: '2399.99',
        productCharacteristics: [
            'Draped in an elegant ball gown with detailed embroidery and glitter accents.',
            'Comes with a display stand for collectors to showcase her beauty.',
            'Hair is styled in an intricate updo, complete with a sparkling tiara.',
            'Shoes and accessories are made with premium materials for added glamour.',
            'Limited edition design, part of the Prestige Collection for serious collectors.',
            'Body is sculpted with precision to highlight realistic features.',
            'Perfect as a centerpiece in any Barbie collection, suitable for ages 12 and up.',
        ],
    },
    {
        name: 'Music Barbie',
        originalImage: 'pics/shop/doll6.jpg',
        hoveredImage: 'pics/shop/doll6_6.jpg',
        starImages: [
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '1000.00',
        currentPrice: '799.99',
        productCharacteristics: [
            'Comes with a mini keyboard that lights up when you press the keys.',
            'Outfit features a colorful, glittery top and a pair of trendy pants.',
            'Includes a detachable microphone and stand for exciting performances.',
            'Movable arms and hands allow Barbie to hold instruments and pose for concerts.',
            'Part of the Superstar Collection, inspiring creativity and self-expression.',
            'Accessories include headphones and a VIP backstage pass lanyard.',
            'Ideal for kids who love music and imaginative play.',
        ],
    },
    {
        name: 'Classic Barbie',
        originalImage: 'pics/shop/doll7.jpg',
        hoveredImage: 'pics/shop/doll7_7.jpg',
        starImages: [
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '3000.00',
        currentPrice: '2599.99',
        productCharacteristics: [
            'Features the iconic pink dress with a shimmery finish and elegant design.',
            'Accessories include a pearl necklace, matching earrings, and high-heeled shoes.',
            'Classic hairstyle with soft curls, reminiscent of Barbie’s original look.',
            'Part of the Timeless Classics collection, celebrating Barbie’s enduring legacy.',
            'Made with high-quality plastic and fabric for long-lasting durability.',
            'Posable joints allow for effortless play and display in various settings.',
            'Perfect for both young fans and adult collectors who cherish Barbie nostalgia.',
        ],
    },
    {
        name: 'Rainbow Barbie',
        originalImage: 'pics/shop/doll8.jpg',
        hoveredImage: 'pics/shop/doll8_8.jpg',
        starImages: [
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '800.00',
        currentPrice: '599.99',
        productCharacteristics: [
            'Dressed in a bright, rainbow-colored dress with glittery accents.',
            'Shoes and accessories are designed to match her vibrant, cheerful theme.',
            'Comes with a rainbow hairbrush and colorful hair clips for styling fun.',
            'Movable joints make her perfect for dynamic poses and imaginative play.',
            'Part of the Colorful Dreams collection, inspiring joy and positivity.',
            'Eyes sparkle with colorful highlights, adding to her cheerful appearance.',
            'Lightweight and easy to handle, perfect for kids aged 4 and up.',
        ],
    },
    {
        name: 'Sleepover Barbie',
        originalImage: 'pics/shop/doll9.jpg',
        hoveredImage: 'pics/shop/doll9_9.jpg',
        starImages: [
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_b.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '2000.00',
        currentPrice: '1599.99',
        productCharacteristics: [
            'Wears cozy, pastel-colored pajamas with cute printed patterns.',
            'Includes a plush teddy bear accessory for bedtime adventures.',
            'Comes with a sleep mask and a pillow for realistic sleepover scenarios.',
            'Part of the Sweet Dreams collection, encouraging nurturing and storytelling.',
            'Made with soft, cuddly materials for a realistic and comforting touch.',
            'Movable arms and legs make her ideal for playtime and bedtime routines.',
            'Perfect for recreating slumber parties and building childhood memories.',
        ],
    },
    {
        name: 'Astronaut Barbie',
        originalImage: 'pics/shop/doll10.avif',
        hoveredImage: 'pics/shop/doll10_10.avif',
        starImages: [
            'pics/shop/star_y.png',
            'pics/shop/star_y.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
            'pics/shop/star_b.png',
        ],
        cartImage: 'pics/shop/cart.png',
        previousPrice: '2500.00',
        currentPrice: '2099.99',
        productCharacteristics: [
            'Clad in a realistic silver spacesuit with NASA-inspired patches.',
            'Includes a removable helmet with a clear visor for added authenticity.',
            'Comes with a miniature rover and flag accessory for space exploration play.',
            'Part of the Dream Big collection, inspiring kids to reach for the stars.',
            'Made with durable, easy-to-clean materials suitable for outdoor adventures.',
            'Posable joints allow her to perform realistic astronaut tasks and poses.',
            'Encourages STEM learning through imaginative play and storytelling.',
        ],
    },
];

let container = document.querySelector('.containerShop');
let cardsContainer = document.querySelector(".cards-container"); 

function createProductCard(product, place) {
    let card = document.createElement('div');
    card.classList.add('card');

    let originalImg = document.createElement('img');
    originalImg.src = product.originalImage;
    originalImg.classList.add('original');
    card.appendChild(originalImg);

    let hoveredImg = document.createElement('img');
    hoveredImg.src = product.hoveredImage;
    hoveredImg.classList.add('hovered');
    card.appendChild(hoveredImg);

    let name = document.createElement('div');
    name.classList.add('name');
    name.textContent = product.name;
    card.appendChild(name);

    let line = document.createElement('div');
    line.classList.add('line');

    let starContainer = document.createElement('div');
    starContainer.classList.add('star');
    product.starImages.forEach((star) => {
        let starImg = document.createElement('img');
        starImg.src = star;
        starContainer.appendChild(starImg);
    });
    line.appendChild(starContainer);

    let cart = document.createElement('div');
    cart.classList.add('cart');
    let cartImg = document.createElement('img');
    cartImg.src = product.cartImage;
    cart.appendChild(cartImg);
    line.appendChild(cart);

    card.appendChild(line);

    let prvPrice = document.createElement('div');
    prvPrice.classList.add('prv_price');
    prvPrice.textContent = product.previousPrice;
    card.appendChild(prvPrice);

    let price = document.createElement('div');
    price.classList.add('price');
    price.textContent = product.currentPrice;
    card.appendChild(price);

    place.appendChild(card); 

    card.dataset.characteristics = JSON.stringify(product.productCharacteristics);
}
products.forEach((product) => {
    createProductCard(product, container); 
});

function createScrollableList(currentProductName) {
    let scrollWrapper = document.createElement('div');
    scrollWrapper.classList.add('cards-container'); 

    products.forEach((product) => {
        createProductCard(product, scrollWrapper, {
            excludeCurrent: true,
            currentProductName,
        });
    });

    cardsContainer.appendChild(scrollWrapper);
}



function adjustCardLayout() {
    let cards = document.querySelectorAll('.card');
    let cardOriginalImages = document.querySelectorAll('.card img.original');
    let cardHoveredImages = document.querySelectorAll('.card img.hovered');
    let stars = document.querySelectorAll('.star img');
    let cartIcons = document.querySelectorAll('.cart img');
    let lines = document.querySelector('.line');
    let name = document.querySelectorAll('.name');
    let price = document.querySelectorAll('.price');
    let prvPrice = document.querySelectorAll('.prv_price');

    if (window.innerWidth > 940) {
        cards.forEach(card => {
            card.style.width = '17.5em';
            card.style.height = '24.5em';

        });
        prvPrice.forEach(el => el.style.fontSize = '0.91em');
        price.forEach(el => el.style.fontSize = '1.4em');
        stars.forEach(el => el.style.height = '1.4em');
        cartIcons.forEach(el => el.style.height = '1.4em');
        cardOriginalImages.forEach(img => img.style.width = '14em');
        cardHoveredImages.forEach(img => img.style.width = '14em');

    }

    else if (window.innerWidth <= 940 && window.innerWidth > 500) {
        cards.forEach(card => {
            card.style.width = '12.5em';
            card.style.height = '19em';
        });

        name.forEach(el => el.style.fontSize = '1.2em');
        prvPrice.forEach(el => el.style.fontSize = '0.8em');
        price.forEach(el => el.style.fontSize = '1.2em');
        stars.forEach(el => el.style.height = '1em');
        cartIcons.forEach(el => el.style.height = '1em');
        cardOriginalImages.forEach(img => img.style.width = '11em');
        cardHoveredImages.forEach(img => img.style.width = '11em');
    }

    else if (window.innerWidth <= 450) {
        cards.forEach(card => {
            card.style.width = '10em';
            card.style.height = '16em';
        });

        name.forEach(el => el.style.fontSize = '1em');
        prvPrice.forEach(el => el.style.fontSize = '0.6em');
        price.forEach(el => el.style.fontSize = '0.8em');
        stars.forEach(el => el.style.height = '0.8em');
        cartIcons.forEach(el => el.style.height = '0.8em');
        cardOriginalImages.forEach(img => img.style.width = '9em');
        cardHoveredImages.forEach(img => img.style.width = '9em');
    }
}

window.addEventListener('load', adjustCardLayout);
window.addEventListener('resize', adjustCardLayout);

document.addEventListener('DOMContentLoaded', () => {
    let cards = document.querySelectorAll('.card');
    let template = document.querySelector("#template");

    cards.forEach(card => {
        card.addEventListener('click', () => {
            let productName = card.querySelector('.name').textContent;
            let productPrice = card.querySelector('.price').textContent;
            let productPrvPrice = card.querySelector('.prv_price').textContent;
            let productStars = card.querySelector('.star').innerHTML;
            let originalImageSrc = card.querySelector('img.original').src;
            let hoveredImageSrc = card.querySelector('img.hovered').src;
            let productCharacteristics = JSON.parse(card.dataset.characteristics);
    
            document.body.innerHTML = '';
            let productPage = template.content.cloneNode(true);
    
            // Populate product details
            productPage.querySelector('.product-name').textContent = productName;
            productPage.querySelector('.product-price').textContent = productPrice;
            productPage.querySelector('.product-prvPrice').textContent = productPrvPrice;
            productPage.querySelector('.product-stars').innerHTML = productStars;
    
            let characteristicsContainer = productPage.querySelector('.product-characteristics');
            let ul = document.createElement('ul');
    
            productCharacteristics.forEach(characteristic => {
                let li = document.createElement('li');
                li.textContent = characteristic;
                ul.appendChild(li);
            });
            characteristicsContainer.appendChild(ul);
    
            let ancorLink = productPage.querySelector('.ancor');
            ancorLink.addEventListener('click', () => {
                characteristicsContainer.scrollIntoView({
                    behavior: 'smooth'
                });
            });
    
            let firstCarouselItem = productPage.querySelector('#first');
            let secondCarouselItem = productPage.querySelector('#second');
            firstCarouselItem.src = originalImageSrc;
            secondCarouselItem.src = hoveredImageSrc;
    
            let scrollableContainer = productPage.querySelector('.cards-container');
    
            function createScrollableList(currentProductName) {
                scrollableContainer.innerHTML = '';
    
                let scrollWrapper = document.createElement('div');
                scrollWrapper.classList.add('cards-container');
    
                products.forEach(product => {
                    if (product.name !== currentProductName) {
                        createProductCard(product, scrollWrapper);
                    }
                });
    
                scrollableContainer.appendChild(scrollWrapper);
            }
    
            createScrollableList(productName);
    
            document.body.appendChild(productPage);
    
            // Back button logic
            let backButton = document.getElementById('backButton');
            backButton.addEventListener('click', () => {
                location.reload();
            });
    
            // Carousel logic
            let carouselItems = document.querySelectorAll('.carousel-item');
            let currentIndex = 0;
    
            function showSlide(index) {
                carouselItems.forEach((item, i) => {
                    item.style.display = i === index ? 'block' : 'none';
                });
            }
    
            function nextSlide() {
                currentIndex = (currentIndex + 1) % carouselItems.length;
                showSlide(currentIndex);
            }
    
            function previousSlide() {
                currentIndex = (currentIndex - 1 + carouselItems.length) % carouselItems.length;
                showSlide(currentIndex);
            }
    
            showSlide(currentIndex);
    
            document.querySelector("#nextBtn").addEventListener('click', nextSlide);
            document.querySelector("#prevBtn").addEventListener('click', previousSlide);
        });
    });
});


document.addEventListener('DOMContentLoaded', () => {
    document.body.addEventListener('click', (event) => {
        if (event.target.classList.contains('buy')) {
            let productName = document.querySelector('.product-name').textContent;
            let productPrice = document.querySelector('.product-price').textContent;
            let productImage = document.querySelector('#first').src;

            // Clear the page and create a new buy page
            document.body.innerHTML = '';

            let buyPage = document.createElement('div');
            buyPage.classList.add('buy-page');

            // Create a back button
            let backButton = document.createElement('button');
            backButton.id = 'backButton';
            backButton.textContent = 'Back';
            backButton.addEventListener('click', () => {
                location.reload(); // Or navigate back to the previous page
            });

            // Create a product summary
            let productSummary = document.createElement('div');
            productSummary.classList.add('product-summary');
            productSummary.innerHTML = `
                <img src="${productImage}" alt="${productName}" class="product-card">
                <div class="product-info">
                    <div class="product-name">${productName}</div>
                    <div class="product-price">${productPrice}</div>
                </div>
            `;

            // Append back button and product summary to the buyPage
            buyPage.appendChild(backButton);
            buyPage.appendChild(productSummary);

            document.body.appendChild(buyPage);
        }
    });

    let form = document.querySelector('.purchase-form');
    form.addEventListener('submit', (event) => {
        event.preventDefault();
        let isValid = true;

        // First Name Validation
        let firstNameField = form.querySelector('#firstName');
        if (firstNameField.value.trim().length < 3) {
            firstNameField.setCustomValidity('First Name must be at least 3 characters long.');
            firstNameField.classList.add('invalid');
            isValid = false;
        } else {
            firstNameField.setCustomValidity('');
            firstNameField.classList.remove('invalid');
        }

        // Last Name Validation
        let lastNameField = form.querySelector('#lastName');
        if (lastNameField.value.trim().length < 6) {
            lastNameField.setCustomValidity('Last Name must be at least 6 characters long.');
            lastNameField.classList.add('invalid');
            isValid = false;
        } else {
            lastNameField.setCustomValidity('');
            lastNameField.classList.remove('invalid');
        }

        // Country Validation
        let countryField = form.querySelector('#country');
        if (!countryField.value) {
            countryField.setCustomValidity('Please select a country.');
            countryField.classList.add('invalid');
            isValid = false;
        } else {
            countryField.setCustomValidity('');
            countryField.classList.remove('invalid');
        }

        // City Validation
        let cityField = form.querySelector('#city');
        if (cityField.value.trim().length < 5) {
            cityField.setCustomValidity('City must be at least 5 characters long.');
            cityField.classList.add('invalid');
            isValid = false;
        } else {
            cityField.setCustomValidity('');
            cityField.classList.remove('invalid');
        }

        // Post Office Validation
        let postOfficeField = form.querySelector('#postOffice');
        if (!postOfficeField.value.trim()) {
            postOfficeField.setCustomValidity('Post Office cannot be empty.');
            postOfficeField.classList.add('invalid');
            isValid = false;
        } else {
            postOfficeField.setCustomValidity('');
            postOfficeField.classList.remove('invalid');
        }

        // Payment Option Validation
        let paymentOptionField = form.querySelector('#paymentOption');
        if (!paymentOptionField.value) {
            paymentOptionField.setCustomValidity('Please select a payment option.');
            paymentOptionField.classList.add('invalid');
            isValid = false;
        } else {
            paymentOptionField.setCustomValidity('');
            paymentOptionField.classList.remove('invalid');
        }

        // If any field is invalid, show an alert
        if (!isValid) {
            alert('Please correct the highlighted fields.');
        } else {
            // Process the form (e.g., show a success message or send the data)
            alert('Form submitted successfully!');
        }
    });
});
